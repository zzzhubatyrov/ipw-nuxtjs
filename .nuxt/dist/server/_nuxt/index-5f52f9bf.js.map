{"version":3,"file":"index-5f52f9bf.js","sources":["../../../../pages/profile/assets/img/camera.svg","../../../../pages/profile/assets/img/editBtnWhite.svg","../../../../pages/profile/assets/img/location.svg","../../../../pages/profile/index.vue"],"sourcesContent":["export default \"__VITE_ASSET__2c0c7f3d__\"","export default \"__VITE_ASSET__cc21045f__\"","export default \"__VITE_ASSET__0ebcb08a__\"","<template>\n  <div class=\"container\" v-if=\"userRole == 'Пользователь'\">\n    <div class=\"container-head\">\n      <div class=\"main-profile\">\n        <img class=\"user-photo\" alt=\"user-photo\" :src=\"`data:image/jpeg;base64,${userData.photo}`\"\n             v-if=\"userData.photo != null\">\n        <button class=\"btn user-photo\" @click=\"openUploadModal\" v-else><img src=\"./assets/img/camera.svg\"\n                                                                            alt=\"add-photo\"></button>\n        <div class=\"user-dataBtn_block\">\n          <div class=\"user-info\">\n            <div class=\"user-nameEdit_block\">\n              <h2 class=\"user-name\">{{userData.name}}</h2>\n              <button class=\"btn\" @click=\"openModal\"><img src=\"./assets/img/editBtnWhite.svg\" alt=\"edit-btn\"></button>\n            </div>\n            <div class=\"user-tagAgeGender_block\">\n              <div class=\"user-tag\" v-if=\"userData.tag == ''\"></div>\n              <div class=\"user-tag\" v-else>{{ userData.tag }}</div>\n              <div class=\"user-ageGender\" v-if=\"userData.birthday != ''\"></div>\n              <div class=\"user-ageGender\" v-if=\"userData.age == null\"></div>\n              <div class=\"user-ageGender\" v-else>{{ userData.gender }}, {{ Age }}</div>\n            </div>\n            <div class=\"user-locationStatus_block\">\n              <div class=\"user-location\" v-if=\"userData.location == ''\"></div>\n              <div class=\"user-location\" v-else><img src=\"./assets/img/location.svg\" alt=\"location\">{{ userData.location }}</div>\n              <div class=\"user-status\">{{ userData.status }}</div>\n            </div>\n            <div class=\"user-emailPhone_block\">\n              <div class=\"user-email\">{{ userData.email }}</div>\n              <div class=\"user-phone\"></div>\n            </div>\n          </div>\n          <div class=\"btn-block\">\n            <NuxtLink class=\"btn employee\" to=\"/employer\">Работодателям</NuxtLink>\n            <button class=\"btn download-cv disable\">Скачать CV</button>\n          </div>\n          <div class=\"brand-logout_btn\">\n            <div class=\"brand\">itprofessionalswork</div>\n            <button class=\"btn\" @click=\"logoutHandler\">Выход</button>\n          </div>\n        </div>\n        <!--        <div class=\"user-social\"></div>-->\n      </div>\n    </div>\n    <div class=\"container-content\">\n      <div class=\"about-me_block\">\n        <div class=\"about-me_head\">\n          <h2>Обо мне</h2>\n          <button class=\"btn\" @click=\"toggleEditMode\"><img src=\"./assets/img/editBtn.svg\" alt=\"edit-btn\"></button>\n        </div>\n        <div class=\"about-me_content\">\n          <div class=\"textArea\" v-if=\"editMode\">\n            <textarea v-model=\"content\" @blur=\"saveDescription\" rows=\"4\"></textarea>\n          </div>\n          <div class=\"content\" v-else>\n            <p>{{ userData.description }}</p>\n          </div>\n        </div>\n      </div>\n      <div class=\"second-content_block\">\n        <div class=\"education-block\">\n          <div class=\"education-head\">\n            <h2>Образование</h2>\n            <button class=\"btn\"><img src=\"./assets/img/editBtn.svg\" alt=\"edit-btn\"></button>\n          </div>\n          <div class=\"education-content\"></div>\n        </div>\n        <div class=\"experience-block\">\n          <div class=\"experience-head\">\n            <h2>Опыт работы</h2>\n            <button class=\"btn\"><img src=\"./assets/img/editBtn.svg\" alt=\"edit-btn\"></button>\n          </div>\n          <div class=\"experience-content\"></div>\n        </div>\n      </div>\n      <div class=\"resume-block\">\n        <div class=\"resume-header\">\n          <h2>Резюме</h2>\n          <NuxtLink class=\"btn\" to=\"/create-resume\">\n            <img src=\"./assets/img/editBtn.svg\" alt=\"add-resume\">\n          </NuxtLink>\n        </div>\n        <div class=\"resume-content\">\n<!--          <div class=\"resume-item\" v-for=\"resumeItem in userDataResumes\">-->\n<!--            <p>delete</p>-->\n<!--            <ProfileResumeComponent :profileResumeData=\"resumeItem\"/>-->\n<!--          </div>-->\n        </div>\n      </div>\n      <div class=\"stack-block\">\n        <div class=\"stack-head\">\n          <h2>Стэк</h2>\n          <button class=\"btn\"><img src=\"./assets/img/editBtn.svg\" alt=\"edit-btn\"></button>\n        </div>\n        <div class=\"stack-content\"></div>\n      </div>\n    </div>\n  </div>\n  <div class=\"container\" v-else>\n    <div class=\"container-head\">\n      <div class=\"main-profile\">\n        <img class=\"user-photo\" alt=\"user-photo\" :src=\"`data:image/jpeg;base64,${userData.photo}`\"\n             v-if=\"userData.photo != null\">\n        <button class=\"btn user-photo\" @click=\"openUploadModal\" v-else><img src=\"./assets/img/camera.svg\"\n                                                                            alt=\"add-photo\"></button>\n        <div class=\"user-dataBtn_block\">\n          <div class=\"user-info\">\n            <div class=\"user-nameEdit_block\">\n              <h2 class=\"user-name\">{{ userData.name }}</h2>\n              <button class=\"btn\" @click=\"openModal\"><img src=\"./assets/img/editBtnWhite.svg\" alt=\"edit-btn\"></button>\n            </div>\n            <div class=\"user-tagAgeGender_block\">\n              <div class=\"user-tag\" v-if=\"userData.tag == ''\"></div>\n              <div class=\"user-tag\" v-else>{{ userData.tag }}</div>\n              <div class=\"user-ageGender\" v-if=\"userData.birthday != ''\"></div>\n              <div class=\"user-ageGender\" v-else>{{ userData.gender }}, {{ Age }}</div>\n            </div>\n            <div class=\"user-locationStatus_block\">\n              <div class=\"user-location\" v-if=\"userData.location == ''\"></div>\n              <div class=\"user-location\" v-else>\n                <span><img src=\"./assets/img/location.svg\" alt=\"location\"></span>\n                {{userData.location}}\n              </div>\n              <div class=\"user-status\" v-if=\"userData.status == ''\"></div>\n              <div class=\"user-status\" v-else>{{ userData.status }}</div>\n            </div>\n            <div class=\"user-emailPhone_block\">\n              <div class=\"user-email\">{{ userData.email }}</div>\n              <div class=\"user-phone\"></div>\n            </div>\n          </div>\n          <div class=\"btn-block\" v-if=\"userRole != 'HR'\">\n            <NuxtLink class=\"btn employee\" to=\"/employer\">Работодателям</NuxtLink>\n            <button class=\"btn download-cv disable\">Скачать CV</button>\n          </div>\n          <div class=\"btn-block\" v-else>\n            <NuxtLink class=\"btn employee\" to=\"/employer\">Работодателям</NuxtLink>\n\n            <button class=\"btn download-cv disable\">Скачать CV</button>\n          </div>\n        </div>\n        <!--        <div class=\"user-social\"></div>-->\n      </div>\n      <div class=\"company\">\n        <img class=\"logo\" alt=\"logo\" :src=\"`data:image/jpeg;base64,${companyData.photo}`\">\n        <div class=\"company-data\">\n          <div class=\"company-name\">{{ companyData.name }}</div>\n          <div class=\"company-location\">\n            {{ companyData.location }}\n          </div>\n          <NuxtLink class=\"btn success company-about_btn\" :to=\"`/company/${companyData.id}`\">Подробнее</NuxtLink>\n        </div>\n      </div>\n    </div>\n    <div class=\"container-content\">\n      <div class=\"about-me_block\">\n        <div class=\"about-me_head\">\n          <h2>Обо мне</h2>\n          <button class=\"btn\" @click=\"toggleEditMode\"><img src=\"./assets/img/editBtn.svg\" alt=\"edit-btn\"></button>\n        </div>\n        <div class=\"about-me_content\">\n          <div class=\"textArea\" v-if=\"editMode\">\n            <textarea v-model=\"content\" @blur=\"saveDescription\" rows=\"4\"></textarea>\n          </div>\n          <div class=\"content\" v-else>\n            <p>{{ userData.description }}</p>\n          </div>\n        </div>\n      </div>\n      <div class=\"second-content_block\">\n        <div class=\"education-block\">\n          <div class=\"education-head\">\n            <h2>Образование</h2>\n            <button class=\"btn\"><img src=\"./assets/img/editBtn.svg\" alt=\"edit-btn\"></button>\n          </div>\n          <div class=\"education-content\"></div>\n        </div>\n        <div class=\"experience-block\">\n          <div class=\"experience-head\">\n            <h2>Опыт работы</h2>\n            <button class=\"btn\"><img src=\"./assets/img/editBtn.svg\" alt=\"edit-btn\"></button>\n          </div>\n          <div class=\"experience-content\"></div>\n        </div>\n      </div>\n      <div class=\"resume-block\">\n        <div class=\"resume-header\">\n          <h2>Резюме</h2>\n          <NuxtLink class=\"btn\" to=\"/create-resume\">\n            <img src=\"./assets/img/editBtn.svg\" alt=\"add-resume\">\n          </NuxtLink>\n        </div>\n        <div class=\"resume-content\">\n<!--          <div class=\"resume-item\" v-for=\"resumeItem in userDataResumes\">-->\n<!--            <p>delete</p>-->\n<!--            <ProfileResumeComponent :profileResumeData=\"resumeItem\"/>-->\n<!--          </div>-->\n        </div>\n      </div>\n      <div class=\"stack-block\">\n        <div class=\"stack-head\">\n          <h2>Стэк</h2>\n          <button class=\"btn\"><img src=\"./assets/img/editBtn.svg\" alt=\"edit-btn\"></button>\n        </div>\n        <div class=\"stack-content\"></div>\n      </div>\n    </div>\n  </div>\n  <div class=\"modal\" v-if=\"showModal\">\n    <UserDataComponent :closeModal=\"closeModal\"/>\n  </div>\n  <div class=\"modal\" v-if=\"uploadModal\">\n    <UploadPhotoComponent :closeUploadModal=\"closeUploadModal\"/>\n  </div>\n</template>\n\n<script setup lang=\"ts\">\nimport UserDataComponent from \"~/components/UserDataComponent.vue\";\nimport HrProfileComponent from \"~/pages/profile/components/HrProfileComponent.vue\";\n// import ProfileResumeComponent from \"~/pages/profile/components/ProfileResumeComponent.vue\";\nimport UploadPhotoComponent from \"~/pages/profile/components/UploadPhotoComponent.vue\";\nimport {ref} from \"vue\";\nimport axios from \"axios\";\nimport Cookies from \"js-cookie\";\n\n\n\nconst router = useRouter()\nconst userData = ref([])\nconst companyData = ref([])\nlet Age = ref()\nconst userDataResumes = ref([])\nlet currentDate = new Date()\nlet userRole = ref('')\n\nconst editMode = ref(false)\nconst content = ref(\"\")\n\nconst toggleEditMode = () => {\n  editMode.value = !editMode.value\n}\nconst saveDescription = async () => {\n  try {\n    const res = await axios.put('https://api.itprofessionalswork.ru/data/v1/user/update', {\n      description: content.value,\n    }, {\n      withCredentials: true\n    })\n    // console.log(content.value)\n    console.log(res)\n  } catch (e) {\n    console.log(e)\n  }\n}\nonMounted(async () => {\n  try {\n    const res = await axios.get('https://api.itprofessionalswork.ru/data/v1/user', {withCredentials: true})\n    userData.value = res.data\n    userDataResumes.value = res.data.resumes\n    const date = userData.value.birthday.replace(/\\./g, '-')\n    const new_date = date.split('-').reverse().join('-')\n    const birth = new Date(new_date)\n    let age = currentDate.getFullYear() - birth.getFullYear()\n    let monthDiff = currentDate.getMonth() - birth.getMonth()\n    if (monthDiff < 0 || (monthDiff === 0 && currentDate.getDate() < birth.getDate())) {\n      age--;\n    }\n    Age.value = age\n    userRole.value = userData.value.role.role_name\n    // console.log(userRole.value)\n    // console.log(res.data)\n    if (!userData.value.gender) {\n      showModal.value = true;\n    }\n    // || !userData.value.age || !userData.value.location || !userData.value.gender || !userData.value.number\n  } catch (e) {\n    console.log(e)\n  }\n})\n\nonMounted(async () => {\n  try {\n    const res = await axios.get('https://api.itprofessionalswork.ru/data/v1/user', {withCredentials: true})\n    companyData.value = res.data.company\n    // console.log(companyData.value)\n  } catch (e) {\n    console.log(e)\n  }\n})\nconst logoutHandler = async () => {\n  try {\n    const res = await axios.post('https://api.itprofessionalswork.ru/auth/v1/logout')\n        .then(() => {\n          Cookies.remove('ipwCookie', {expires: -1})\n          window.location.reload()\n        })\n        .catch(e => console.log(e))\n    // Cookies.remove('ipwCookie', {expires: -1})\n    // window.location.reload()\n    console.log(res)\n    // console.log(Cookies.get())\n  } catch (e) {\n    console.log(e)\n  }\n}\nonMounted(() => {\n  const isAuth = Cookies.get(\"ipw\")\n  if (!isAuth) {\n    router.push('/auth')\n  }\n})\ndefineComponent({\n  UserDataComponent,\n  HrProfileComponent,\n  // ProfileResumeComponent,\n  UploadPhotoComponent\n})\n\nconst showModal = ref(false)\nconst uploadModal = ref(false)\nconst openModal = () => {\n  showModal.value = true\n}\nconst closeModal = () => {\n  showModal.value = false\n}\n\nconst openUploadModal = () => {\n  uploadModal.value = true\n}\nconst closeUploadModal = () => {\n  uploadModal.value = false\n}\n\n</script>\n\n<style scoped>\n@import 'assets/css/profile.css';\n\nh1, h2, h3, h4, p {\n  margin: 0;\n  padding: 0;\n}\n\n.textArea {\n  width: 100%;\n}\n\ntextarea {\n  width: 100%;\n  border: none;\n}\n\n.content {\n  width: 100%;\n}\n\n.brand-logout_btn {\n  display: flex;\n  gap: 20px;\n}\n</style>"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;AAAA,MAAe,aAAA,KAAA,iBAAA,qBAAA;ACAf,MAAe,aAAA,KAAA,iBAAA,2BAAA;ACAf,MAAe,aAAA,KAAA,iBAAA,uBAAA;;;;;ACkOA,cAAU;AACnB,UAAA,WAAW,IAAI,CAAA,CAAE;AACjB,UAAA,cAAc,IAAI,CAAA,CAAE;AAC1B,QAAI,MAAM;AACc,QAAI,CAAA,CAAE;AAE1B,QAAA,WAAW,IAAI,EAAE;AAEf,UAAA,WAAW,IAAI,KAAK;AACpB,UAAA,UAAU,IAAI,EAAE;AAkFhB,UAAA,YAAY,IAAI,KAAK;AACrB,UAAA,cAAc,IAAI,KAAK;AAI7B,UAAM,aAAa,MAAM;AACvB,gBAAU,QAAQ;AAAA,IAAA;AAMpB,UAAM,mBAAmB,MAAM;AAC7B,kBAAY,QAAQ;AAAA,IAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;"}