import{d as W,u as q,r as l,a as U,o as a,c as e,x as k,b as t,t as c,e as V,h as v,z as _,A as h,w as j,v as E,F as J,f as w,B as K,p as O,g as Q,_ as X}from"./entry.34ecb820.js";import{_ as n}from"./editBtn.7ddc1e7e.js";import{U as Z}from"./UserDataComponent.ab61e498.js";import tt from"./UploadPhotoComponent.ae857a56.js";import{a as y}from"./axios.21b846bc.js";import{a as F}from"./js.cookie.edb2da2a.js";const I=""+new URL("camera.7557b9ff.svg",import.meta.url).href,L=""+new URL("editBtnWhite.8e8ae023.svg",import.meta.url).href,$=""+new URL("location.d095fd92.svg",import.meta.url).href,o=b=>(O("data-v-0dafda97"),b=b(),Q(),b),st={key:0,class:"container"},at={class:"container-head"},et={class:"main-profile"},ot=["src"],dt=o(()=>t("img",{src:I,alt:"add-photo"},null,-1)),ct=[dt],nt={class:"user-dataBtn_block"},lt={class:"user-info"},it={class:"user-nameEdit_block"},_t={class:"user-name"},ut=o(()=>t("img",{src:L,alt:"edit-btn"},null,-1)),rt=[ut],vt={class:"user-tagAgeGender_block"},ht={key:0,class:"user-tag"},pt={key:1,class:"user-tag"},mt={key:2,class:"user-ageGender"},bt={key:3,class:"user-ageGender"},ft={key:4,class:"user-ageGender"},gt={class:"user-locationStatus_block"},kt={key:0,class:"user-location"},yt={key:1,class:"user-location"},wt=o(()=>t("img",{src:$,alt:"location"},null,-1)),xt={class:"user-status"},Ct={class:"user-emailPhone_block"},Dt={class:"user-email"},Mt=o(()=>t("div",{class:"user-phone"},null,-1)),Ut={class:"btn-block"},Vt=o(()=>t("button",{class:"btn download-cv disable"},"Скачать CV",-1)),Bt=o(()=>t("div",{class:"brand"},"itprofessionalswork",-1)),At={class:"container-content"},Gt={class:"about-me_block"},Rt=o(()=>t("h2",null,"Обо мне",-1)),St=o(()=>t("img",{src:n,alt:"edit-btn"},null,-1)),Nt=[St],jt={class:"about-me_content"},Et={key:0,class:"textArea"},Ft={key:1,class:"content"},It=w('<div class="second-content_block" data-v-0dafda97><div class="education-block" data-v-0dafda97><div class="education-head" data-v-0dafda97><h2 data-v-0dafda97>Образование</h2><button class="btn" data-v-0dafda97><img src="'+n+'" alt="edit-btn" data-v-0dafda97></button></div><div class="education-content" data-v-0dafda97></div></div><div class="experience-block" data-v-0dafda97><div class="experience-head" data-v-0dafda97><h2 data-v-0dafda97>Опыт работы</h2><button class="btn" data-v-0dafda97><img src="'+n+'" alt="edit-btn" data-v-0dafda97></button></div><div class="experience-content" data-v-0dafda97></div></div></div>',1),Lt={class:"resume-block"},$t={class:"resume-header"},Pt=o(()=>t("h2",null,"Резюме",-1)),Ht=o(()=>t("img",{src:n,alt:"add-resume"},null,-1)),Tt=o(()=>t("div",{class:"resume-content"},null,-1)),Yt=w('<div class="stack-block" data-v-0dafda97><div class="stack-head" data-v-0dafda97><h2 data-v-0dafda97>Стэк</h2><button class="btn" data-v-0dafda97><img src="'+n+'" alt="edit-btn" data-v-0dafda97></button></div><div class="stack-content" data-v-0dafda97></div></div>',1),zt={key:1,class:"container"},Wt={class:"container-head"},qt={class:"main-profile"},Jt=["src"],Kt=o(()=>t("img",{src:I,alt:"add-photo"},null,-1)),Ot=[Kt],Qt={class:"user-dataBtn_block"},Xt={class:"user-info"},Zt={class:"user-nameEdit_block"},ts={class:"user-name"},ss=o(()=>t("img",{src:L,alt:"edit-btn"},null,-1)),as=[ss],es={class:"user-tagAgeGender_block"},os={key:0,class:"user-tag"},ds={key:1,class:"user-tag"},cs={key:2,class:"user-ageGender"},ns={key:3,class:"user-ageGender"},ls={class:"user-locationStatus_block"},is={key:0,class:"user-location"},_s={key:1,class:"user-location"},us=o(()=>t("span",null,[t("img",{src:$,alt:"location"})],-1)),rs={key:2,class:"user-status"},vs={key:3,class:"user-status"},hs={class:"user-emailPhone_block"},ps={class:"user-email"},ms=o(()=>t("div",{class:"user-phone"},null,-1)),bs={key:0,class:"btn-block"},fs=o(()=>t("button",{class:"btn download-cv disable"},"Скачать CV",-1)),gs={key:1,class:"btn-block"},ks=o(()=>t("button",{class:"btn download-cv disable"},"Скачать CV",-1)),ys={class:"company"},ws=["src"],xs={class:"company-data"},Cs={class:"company-name"},Ds={class:"company-location"},Ms={class:"container-content"},Us={class:"about-me_block"},Vs=o(()=>t("h2",null,"Обо мне",-1)),Bs=o(()=>t("img",{src:n,alt:"edit-btn"},null,-1)),As=[Bs],Gs={class:"about-me_content"},Rs={key:0,class:"textArea"},Ss={key:1,class:"content"},Ns=w('<div class="second-content_block" data-v-0dafda97><div class="education-block" data-v-0dafda97><div class="education-head" data-v-0dafda97><h2 data-v-0dafda97>Образование</h2><button class="btn" data-v-0dafda97><img src="'+n+'" alt="edit-btn" data-v-0dafda97></button></div><div class="education-content" data-v-0dafda97></div></div><div class="experience-block" data-v-0dafda97><div class="experience-head" data-v-0dafda97><h2 data-v-0dafda97>Опыт работы</h2><button class="btn" data-v-0dafda97><img src="'+n+'" alt="edit-btn" data-v-0dafda97></button></div><div class="experience-content" data-v-0dafda97></div></div></div>',1),js={class:"resume-block"},Es={class:"resume-header"},Fs=o(()=>t("h2",null,"Резюме",-1)),Is=o(()=>t("img",{src:n,alt:"add-resume"},null,-1)),Ls=o(()=>t("div",{class:"resume-content"},null,-1)),$s=w('<div class="stack-block" data-v-0dafda97><div class="stack-head" data-v-0dafda97><h2 data-v-0dafda97>Стэк</h2><button class="btn" data-v-0dafda97><img src="'+n+'" alt="edit-btn" data-v-0dafda97></button></div><div class="stack-content" data-v-0dafda97></div></div>',1),Ps={key:2,class:"modal"},Hs={key:3,class:"modal"},Ts=W({__name:"index",setup(b){const P=q(),s=l([]),p=l([]);let x=l();const H=l([]);let C=new Date,D=l("");const f=l(!1),m=l(""),B=()=>{f.value=!f.value},A=async()=>{try{const d=await y.put("https://api.itprofessionalswork.ru/data/v1/user/update",{description:m.value},{withCredentials:!0});console.log(d)}catch(d){console.log(d)}};U(async()=>{try{const d=await y.get("https://api.itprofessionalswork.ru/data/v1/user",{withCredentials:!0});s.value=d.data,H.value=d.data.resumes;const i=s.value.birthday.replace(/\./g,"-").split("-").reverse().join("-"),r=new Date(i);let S=C.getFullYear()-r.getFullYear(),N=C.getMonth()-r.getMonth();(N<0||N===0&&C.getDate()<r.getDate())&&S--,x.value=S,D.value=s.value.role.role_name,s.value.gender||(g.value=!0)}catch(d){console.log(d)}}),U(async()=>{try{const d=await y.get("https://api.itprofessionalswork.ru/data/v1/user",{withCredentials:!0});p.value=d.data.company}catch(d){console.log(d)}});const T=async()=>{try{const d=await y.post("https://api.itprofessionalswork.ru/auth/v1/logout").then(()=>{F.remove("ipwCookie",{expires:-1}),window.location.reload()}).catch(u=>console.log(u));console.log(d)}catch(d){console.log(d)}};U(()=>{F.get("ipw")||P.push("/auth")});const g=l(!1),M=l(!1),G=()=>{g.value=!0},Y=()=>{g.value=!1},R=()=>{M.value=!0},z=()=>{M.value=!1};return(d,u)=>{const i=K;return a(),e(J,null,[k(D)=="Пользователь"?(a(),e("div",st,[t("div",at,[t("div",et,[s.value.photo!=null?(a(),e("img",{key:0,class:"user-photo",alt:"user-photo",src:`data:image/jpeg;base64,${s.value.photo}`},null,8,ot)):(a(),e("button",{key:1,class:"btn user-photo",onClick:R},ct)),t("div",nt,[t("div",lt,[t("div",it,[t("h2",_t,c(s.value.name),1),t("button",{class:"btn",onClick:G},rt)]),t("div",vt,[s.value.tag==""?(a(),e("div",ht)):(a(),e("div",pt,c(s.value.tag),1)),s.value.birthday!=""?(a(),e("div",mt)):V("",!0),s.value.age==null?(a(),e("div",bt)):(a(),e("div",ft,c(s.value.gender)+", "+c(k(x)),1))]),t("div",gt,[s.value.location==""?(a(),e("div",kt)):(a(),e("div",yt,[wt,v(c(s.value.location),1)])),t("div",xt,c(s.value.status),1)]),t("div",Ct,[t("div",Dt,c(s.value.email),1),Mt])]),t("div",Ut,[_(i,{class:"btn employee",to:"/employer"},{default:h(()=>[v("Работодателям")]),_:1}),Vt]),t("div",{class:"brand-logout_btn"},[Bt,t("button",{class:"btn",onClick:T},"Выход")])])])]),t("div",At,[t("div",Gt,[t("div",{class:"about-me_head"},[Rt,t("button",{class:"btn",onClick:B},Nt)]),t("div",jt,[f.value?(a(),e("div",Et,[j(t("textarea",{"onUpdate:modelValue":u[0]||(u[0]=r=>m.value=r),onBlur:A,rows:"4"},null,544),[[E,m.value]])])):(a(),e("div",Ft,[t("p",null,c(s.value.description),1)]))])]),It,t("div",Lt,[t("div",$t,[Pt,_(i,{class:"btn",to:"/create-resume"},{default:h(()=>[Ht]),_:1})]),Tt]),Yt])])):(a(),e("div",zt,[t("div",Wt,[t("div",qt,[s.value.photo!=null?(a(),e("img",{key:0,class:"user-photo",alt:"user-photo",src:`data:image/jpeg;base64,${s.value.photo}`},null,8,Jt)):(a(),e("button",{key:1,class:"btn user-photo",onClick:R},Ot)),t("div",Qt,[t("div",Xt,[t("div",Zt,[t("h2",ts,c(s.value.name),1),t("button",{class:"btn",onClick:G},as)]),t("div",es,[s.value.tag==""?(a(),e("div",os)):(a(),e("div",ds,c(s.value.tag),1)),s.value.birthday!=""?(a(),e("div",cs)):(a(),e("div",ns,c(s.value.gender)+", "+c(k(x)),1))]),t("div",ls,[s.value.location==""?(a(),e("div",is)):(a(),e("div",_s,[us,v(" "+c(s.value.location),1)])),s.value.status==""?(a(),e("div",rs)):(a(),e("div",vs,c(s.value.status),1))]),t("div",hs,[t("div",ps,c(s.value.email),1),ms])]),k(D)!="HR"?(a(),e("div",bs,[_(i,{class:"btn employee",to:"/employer"},{default:h(()=>[v("Работодателям")]),_:1}),fs])):(a(),e("div",gs,[_(i,{class:"btn employee",to:"/employer"},{default:h(()=>[v("Работодателям")]),_:1}),ks]))])]),t("div",ys,[t("img",{class:"logo",alt:"logo",src:`data:image/jpeg;base64,${p.value.photo}`},null,8,ws),t("div",xs,[t("div",Cs,c(p.value.name),1),t("div",Ds,c(p.value.location),1),_(i,{class:"btn success company-about_btn",to:`/company/${p.value.id}`},{default:h(()=>[v("Подробнее")]),_:1},8,["to"])])])]),t("div",Ms,[t("div",Us,[t("div",{class:"about-me_head"},[Vs,t("button",{class:"btn",onClick:B},As)]),t("div",Gs,[f.value?(a(),e("div",Rs,[j(t("textarea",{"onUpdate:modelValue":u[1]||(u[1]=r=>m.value=r),onBlur:A,rows:"4"},null,544),[[E,m.value]])])):(a(),e("div",Ss,[t("p",null,c(s.value.description),1)]))])]),Ns,t("div",js,[t("div",Es,[Fs,_(i,{class:"btn",to:"/create-resume"},{default:h(()=>[Is]),_:1})]),Ls]),$s])])),g.value?(a(),e("div",Ps,[_(Z,{closeModal:Y})])):V("",!0),M.value?(a(),e("div",Hs,[_(tt,{closeUploadModal:z})])):V("",!0)],64)}}});const Os=X(Ts,[["__scopeId","data-v-0dafda97"]]);export{Os as default};
